# ЯСНЫЙ: практический учебник

Этот учебник даёт полный минимальный путь: язык -> модули -> backend -> тесты.

## 1. Первая программа

Создайте `hello.яс`:

```text
функция main() -> Пусто:
    печать("Привет, ЯСНЫЙ!")
    вернуть пусто
```

Запуск:

```powershell
yasn run hello.яс
```

Проверка без запуска:

```powershell
yasn check hello.яс
```

## 2. Переменные и типы

```text
пусть n = 10
пусть pi: Дроб = 3.14
пусть имя: Строка = "Анна"
пусть ok: Лог = истина
пусть пустое: Пусто = пусто
```

Union и nullable:

```text
пусть v: Цел | Строка = 10
v = "текст"

пусть user: Строка? = пусто
если user == пусто:
    печать("пользователь не задан")
```

## 3. Функции и контроль потока

```text
функция сумма(a: Цел, b: Цел) -> Цел:
    вернуть a + b

функция ничего() -> Пусто:
    печать("готово")
    вернуть

функция main() -> Пусто:
    пусть total: Цел = 0
    для i в диапазон(0, 5):
        total = total + i

    если total > 10:
        печать("больше")
    иначе если total == 10:
        печать("ровно 10")
    иначе:
        печать("меньше")

    вернуть
```

`вернуть` без выражения допускается в функциях с типом `-> Пусто`.

`иначе если` позволяет выстраивать цепочки условий без вложенности.

## 4. Коллекции и точечный доступ

```text
пусть arr: Список[Цел] = [1, 2, 3]
добавить(arr, 4)
печать(arr[0], длина(arr))

пусть rates: Словарь[Строка, Цел] = { "usd": 100, "eur": 110 }
печать(rates["usd"])
rates["usd"] = 120
печать(ключи(rates), содержит(rates, "eur"))
```

Для словарей с ключами типа `Строка` доступен точечный доступ:

```text
пусть user: Словарь[Строка, Любой] = { "имя": "Анна", "возраст": 25 }
печать(user.имя)
user.возраст = 26
user.email = "anna@example.com"
```

## 5. Преобразования типов

```text
пусть s: Строка = строка(42)
пусть n: Цел = число("123")
пусть d: Дроб = дробное("3.14")
пусть d2: Дроб = дробное(42)
```

- `строка(x)` — преобразует любое значение в строку;
- `число(x)` — преобразует строку/логическое в целое число;
- `дробное(x)` — преобразует строку/целое/логическое в дробное число.

## 6. Модули

`lib/математика.яс`:

```text
экспорт функция сумма(a: Цел, b: Цел) -> Цел:
    вернуть a + b
```

`app.яс`:

```text
подключить "lib/математика.яс" как мат

функция main() -> Пусто:
    печать(мат.сумма(2, 3))
    вернуть пусто
```

## 7. Работа с файлами и JSON

```text
функция main() -> Пусто:
    пусть path: Строка = "build/data.json"
    файл_записать(path, "{\"title\":\"yasn\",\"v\":1}")

    пусть raw: Строка = файл_читать(path)
    пусть data = json_разобрать(raw)

    утверждать_равно(data["title"], "yasn")
    печать("json ok", json_строка(data))

    файл_удалить(path)
    вернуть пусто
```

## 8. HTTP-вызовы

```text
функция main() -> Пусто:
    пусть r = http_get("https://example.com")
    утверждать_равно(r["status"], 200)
    утверждать(длина(r["body"]) > 0)
    вернуть пусто
```

## 9. Асинхронные задачи

```text
асинхронная функция квадрат(x: Цел) -> Цел:
    пауза(100)
    вернуть x * x

функция main() -> Пусто:
    пусть t1: Задача = квадрат(6)
    пусть t2: Задача = квадрат(7)

    пусть values = ожидать_все([t1, t2], 2000)
    печать(values)
    вернуть пусто
```

## 10. Backend за 1 файл

`backend/main.яс`:

```text
экспорт функция здоровье() -> Строка:
    вернуть "ok"

экспорт функция сумма(a: Цел, b: Цел) -> Цел:
    вернуть a + b

функция main() -> Пусто:
    вернуть пусто
```

Запуск HTTP:

```powershell
yasn serve backend/main.яс --host 127.0.0.1 --port 8000
```

## 11. Тесты

Создайте `tests/math_test.яс`:

```text
функция main() -> Пусто:
    утверждать_равно(2 + 2, 4)
    утверждать(истина)
    вернуть пусто
```

Запуск всех тестов:

```powershell
yasn test
```

## 12. Структура проекта

```text
my-app/
  yasn.toml
  backend/
    main.яс
  lib/
    математика.яс
  tests/
    math_test.яс
```

## 13. Рекомендации

- проверяйте код `yasn check` до запуска;
- держите API-функции backend как `экспорт функция ...`;
- покрывайте критичные сценарии тестами через `yasn test`;
- используйте `deps` + lock-файл для воспроизводимости.
