# Демонстрация синтаксиса языка Ясный

функция фибоначчи(n: Цел) -> Список[Цел]:
    пусть a: Цел = 0
    пусть b: Цел = 1
    пусть результат: Список[Цел] = [a, b]
    пусть i: Цел = 2
    пока i < n:
        пусть c: Цел = a + b
        a = b
        b = c
        добавить(результат, c)
        i = i + 1
    вернуть результат

функция классификация(значение: Дроб) -> Строка:
    если значение > 100.0:
        вернуть "высокое"
    иначе если значение >= 50.0:
        вернуть "среднее"
    иначе:
        вернуть "низкое"

функция поиск(элементы: Список[Цел], цель: Цел) -> Цел:
    для индекс в диапазон(0, длина(элементы)):
        если элементы[индекс] == цель:
            вернуть индекс
        если элементы[индекс] > цель:
            прервать
    вернуть 0 - 1

функция статистика(числа: Список[Цел]) -> Словарь[Строка, Любой]:
    пусть сумма: Цел = 0
    пусть мин: Цел = числа[0]
    пусть макс: Цел = числа[0]
    для x в числа:
        сумма = сумма + x
        если x < мин:
            мин = x
        если x > макс:
            макс = x
    вернуть { "сумма": сумма, "мин": мин, "макс": макс, "кол": длина(числа) }

асинхронная функция медленный_квадрат(x: Цел) -> Цел:
    пауза(100)
    вернуть x * x

функция main() -> Пусто:
    # Числа Фибоначчи
    пусть фиб: Список[Цел] = фибоначчи(10)
    печать("Фибоначчи:", фиб)

    # Классификация
    пусть оценка: Дроб = 75.5
    печать(оценка, "->", классификация(оценка))
    печать(200.0, "->", классификация(200.0))

    # Поиск в массиве
    пусть данные: Список[Цел] = [2, 5, 8, 13, 21, 34]
    пусть позиция: Цел = поиск(данные, 13)
    если позиция != 0 - 1:
        печать("Найдено на позиции:", позиция)
    иначе:
        печать("Не найдено")

    # Статистика
    пусть стат: Словарь[Строка, Любой] = статистика([10, 25, 7, 42, 3])
    печать("Статистика:", стат)

    # Логические операторы
    пусть активен: Лог = истина
    пусть готов: Лог = ложь
    если активен и не готов:
        печать("В процессе")
    если активен или готов:
        печать("Хотя бы одно истинно")

    # Асинхронность
    пусть t1: Задача = медленный_квадрат(7)
    пусть t2: Задача = медленный_квадрат(9)
    пусть r: Список[Любой] = ожидать_все([t1, t2], 2000)
    печать("Квадраты:", r)

    # JSON и файлы
    пусть объект: Словарь[Строка, Любой] = { "имя": "Ясный", "версия": 1 }
    пусть текст: Строка = json_строка(объект)
    печать("JSON:", текст)
    пусть обратно: Любой = json_разобрать(текст)
    печать("Разобрано:", обратно)

    печать("Время:", время_мс(), "мс")
    вернуть пусто
